<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.52
     from ../vice.texi on 17 September 1998 -->

<TITLE>VICE Manual - 8  Snapshots</TITLE>
</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#00000">
Go to the <A HREF="vice_1.html">first</A>, <A HREF="vice_7.html">previous</A>, <A HREF="vice_9.html">next</A>, <A HREF="vice_15.html">last</A> section, <A HREF="vice_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="SEC100" HREF="vice_toc.html#TOC100">8  Snapshots</A></H1>

<P>
Every VICE emulator has a built-in snapshot feature, that saves
the complete Emulator state (see below) into one file. This file
can then be used to restore the emulator state by loading it.

</P>



<H2><A NAME="SEC101" HREF="vice_toc.html#TOC101">8.1  Snapshot usage</A></H2>

<P>
A snapshot is one file. It contains the complete emulator state.
A snapshot file can be generated by selecting the <CODE>save snapshot</CODE>
menu entry at any time.

</P>
<P>
A snapshot file can be used to restore the emulator state by selecting
the <CODE>load snapshot</CODE> menu entry at any time.

</P>
<P>
<B>Warning</B>: The complete state is saved, but not restored are: 

<P> <UL>
<P> <LI>The ROMs. This can pose problems when restoring the state of a

PET 3032 into a PET 4032 for example. Also attached cartridges are
not saved. I.e. you have to attach them before restoring a snapshot
of run of such a cartridge.

<P> <LI>The memory configuration. The VIC20, PET and CBM-II emulators

do have some memory expansion info. This is saved but not (yet??)
restored.

</UL> </P>



<H2><A NAME="SEC102" HREF="vice_toc.html#TOC102">8.2  Snapshot format</A></H2>

<P>
A snapshot file consists of several modules. 
Each module has a name. 
A module saves the state of an entity like a CIA, the CPU,
or the memory. 

</P>



<H3><A NAME="SEC103" HREF="vice_toc.html#TOC103">8.2.1  Emulator modules</A></H3>

<P>
This section lists the modules that are contained in each of the
emulators snapshot files.

</P>



<H4><A NAME="SEC104" HREF="vice_toc.html#TOC104">8.2.1.1  x64 modules</A></H4>



<H4><A NAME="SEC105" HREF="vice_toc.html#TOC105">8.2.1.2  x128 modules</A></H4>



<H4><A NAME="SEC106" HREF="vice_toc.html#TOC106">8.2.1.3  xvic modules</A></H4>



<H4><A NAME="SEC107" HREF="vice_toc.html#TOC107">8.2.1.4  xpet modules</A></H4>



<H4><A NAME="SEC108" HREF="vice_toc.html#TOC108">8.2.1.5  x610 modules</A></H4>



<H3><A NAME="SEC109" HREF="vice_toc.html#TOC109">8.2.2  Module formats</A></H3>

<P>
This section shows the basic module framework and 
the contents of the different types of modules.

</P>



<H4><A NAME="SEC110" HREF="vice_toc.html#TOC110">8.2.2.1  Module framework</A></H4>



<H4><A NAME="SEC111" HREF="vice_toc.html#TOC111">8.2.2.2  CPU module</A></H4>



<H4><A NAME="SEC112" HREF="vice_toc.html#TOC112">8.2.2.3  CIA module</A></H4>

<P>
The CIA 6526 is an I/O port chip with 2 8-bit I/O ports, a shift register,
two timers, a Time of Day clock and interrupts.

</P>
<TABLE BORDER>

<TR><TD>Type</TD>

<TD>Name </TD>
<TD>Description</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ORA </TD>
<TD>Output register A</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ORB </TD>
<TD>Output register B</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>DDRA </TD>
<TD>Data direction register A</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>DDRB </TD>
<TD>Data direction register B</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>TAC </TD>
<TD>Timer A counter value</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>TBC </TD>
<TD>Timer B counter value</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TOD_TEN </TD>
<TD>Time of Day - current tenth of second</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TOD_SEC </TD>
<TD>Time of Day - current seconds</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TOD_MIN </TD>
<TD>Time of Day - current minutes</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TOD_HR </TD>
<TD>Time of Day - current hours</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>SDR </TD>
<TD>contents of shift register</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>IER </TD>
<TD>mask of enabled interrupt masks</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>CRA </TD>
<TD>Control register A</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>CRB </TD>
<TD>Control register B</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>TAL </TD>
<TD>Timer A latch value</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>TBL </TD>
<TD>Timer B latch value</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>IFR </TD>
<TD>mask of currently active interrupts</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>PBSTATE </TD>
<TD>Bit 6/7 reflect the PB6/7 toggle bit state. Bit 2/3 reflect the corresponding port bit state.</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>SRHBITS </TD>
<TD>number of half-bits to still shift in/out SDR</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ALARM_TEN </TD>
<TD>Time of Day - alarm tenth of second</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ALARM_SEC </TD>
<TD>Time of Day - alarm seconds</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ALARM_MIN </TD>
<TD>Time of Day - alarm minutes</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ALARM_HR </TD>
<TD>Time of Day - alarm hours</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>READICR </TD>
<TD>current clock minus the clock when ICR was read last plus 128.</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TODLATCHED </TD>
<TD>Bit 0: 1= latched for reading, Bit 1: 2=stopped for writing</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TODL_TEN </TD>
<TD>Time of Day - latched tenth of second</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TODL_SEC </TD>
<TD>Time of Day - latched seconds</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TODL_MIN </TD>
<TD>Time of Day - latched minutes</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>TODL_HR </TD>
<TD>Time of Day - latched hours</TD>
</TR>
<TR><TD>DWORD</TD>

<TD>TOD_TICKS </TD>
<TD>clk ticks till next tenth of second</TD>
</TR></TABLE>



<H4><A NAME="SEC113" HREF="vice_toc.html#TOC113">8.2.2.4  VIA module</A></H4>

<P>
The VIA 6522 is the predecessor of the CIA and also an I/O port chip 
with 2 8-bit I/O ports, a shift register,
two timers and interrupts.

</P>
<TABLE BORDER>

<TR><TD>Type</TD>

<TD>Name </TD>
<TD>Description</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ORA</TD>
<TD>Output register A</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>DDRA</TD>
<TD>Data direction register A</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ORB</TD>
<TD>Output register B</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>DDRB</TD>
<TD>Data direction register B</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>T1L</TD>
<TD>Timer 1 Latch value</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>T1C</TD>
<TD>Timer 1 counter value</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>T2L</TD>
<TD>Timer 2 latch (8 bit as only lower byte is used)</TD>
</TR>
<TR><TD>UWORD</TD>

<TD>T2C</TD>
<TD>Timer 2 counter value</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>SR</TD>
<TD>Shift register value</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>ACR</TD>
<TD>Auxiliary control register</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>PCR</TD>
<TD>Peripheral control register</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>IFR</TD>
<TD>active interrupts</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>IER</TD>
<TD>interrupt mask</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>PB7</TD>
<TD>bit 7 = pb7 state</TD>
</TR>
<TR><TD>UBYTE</TD>

<TD>SRHBITS</TD>
<TD>number of half-bits to shift out on SR</TD>
</TR></TABLE>



<H4><A NAME="SEC114" HREF="vice_toc.html#TOC114">8.2.2.5  TPI module</A></H4>



<H4><A NAME="SEC115" HREF="vice_toc.html#TOC115">8.2.2.6  SID module</A></H4>



<H4><A NAME="SEC116" HREF="vice_toc.html#TOC116">8.2.2.7  ACIA module</A></H4>



<H4><A NAME="SEC117" HREF="vice_toc.html#TOC117">8.2.2.8  C64 memory module</A></H4>



<H4><A NAME="SEC118" HREF="vice_toc.html#TOC118">8.2.2.9  C128 memory module</A></H4>



<H4><A NAME="SEC119" HREF="vice_toc.html#TOC119">8.2.2.10  VIC20 memory module</A></H4>



<H4><A NAME="SEC120" HREF="vice_toc.html#TOC120">8.2.2.11  PET memory module</A></H4>



<H4><A NAME="SEC121" HREF="vice_toc.html#TOC121">8.2.2.12  C610 memory module</A></H4>

<P><HR><P>
Go to the <A HREF="vice_1.html">first</A>, <A HREF="vice_7.html">previous</A>, <A HREF="vice_9.html">next</A>, <A HREF="vice_15.html">last</A> section, <A HREF="vice_toc.html">table of contents</A>.
</BODY>
</HTML>
