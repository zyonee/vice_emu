2003-10-05  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.4

	* video/video-cmdline-options.c, vic20/vic-cmdline-options.c.
	vicii/vicii-cmdline-options.c, plus4/ted-cmdline-options.c,
	crtc/crtc-cmdline-options.c, vdc/vdc-cmdline-options.c:
	Unified palette command line options.

	* video/video-resources.c, video.h, vicii/vicii-resources.c,
	vic20/vic-resources.c, plus4/ted-resources.c,
	crtc/crtc-resources.c, vdc/vdc-resources.c: Unified palette
	resources.

	* arch/unix/uivicii.c, arch/unix/uicrtc.c, arch/unix/uivdc.c,
	arch/unix/uivic.c, arch/msdos/plus4ui.c, arch/msdos/c64ui.c,
	arch/msdos/cbm2ui.c, arch/msdos/c128ui.c, arch/msdos/petui.c:
	Changed palette resources.

	* 6510core.c: Fixed drive 1 debugging.

	* drive/iec/cia1581d.c (read_ciapa): Added disk change bit.
	(store_ciapa): Added side bit.

	* drive/driverom.c (drive_rom_initialize_traps): Added 1581
	CRC trap, removed jobcode trap.

	* drive/iec/wd1770.c, drive/iec/wd1770.h: Massive rewrite.

	* drive/iec/jobcode1581.c: Small changes.

	* core/riotcore.c: #include "lib.h".

	* c64/cart/ide64.c (ide64_bin_attach): Fixed warning.

	* arch/win32/video.c: Fixed nested comment.

2003-10-03  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.3

	* gfxoutputdrv/gfxoutput.c: Fixed define.

	* raster/raster.c (raster_shutdown): Free palette before the
	canvas is freed.

	* via.h, core/viacore.c, drive/iec/via1d1541.c
	drive/ieee/via1d2031.c: Fixed snapshot module mess.

	* core/ciatimer.c, core/ciatimer.h: Moved some functions to
	the source file.

2003-09-30  Dirk Jagdmann  <doj@cubic.org>

	* arch/unix/catweaselmkiii.c: fixed reading from SID

2003-09-28  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.2

	* raster/raster.c, raster/raster.h: Removed palette support.

	* video.h, arch/unix/x11/video.c, arch/win32/video.c,
	arch/msdos/video.c, arch/riscos/video.c, arch/os2/video.c,
	arch/beos/video.cc (video_canvas_create): Removed palette
	parameter. (video_canvas_set_palette): Palette is not const.

	* arch/unix/x11/videoarch.h, arch/win32/videoarch.h,
	arch/msdos/videoarch.h, arch/riscos/videoarch.h,
	arch/os2/videoarch.h, arch/beos/videoarch.h: Changed palette
	member, new member `created'.

	* video/video-canvas.c (video_canvas_palette_set,
	video_canvas_create_set): New functions.

	* video/video-canvas.h: New file.

	* video/Makefile.am: Added new file.

	* video/video-color.c (video_color_update_palette): Call
	`video_canvas_palette_set()' and removed raster hack.
	(video_color_palette_free): New function.

	* video.h, video/video-color.c, vicii/vicii.c, vic20/vic.c,
	plus4/ted.c (video_color_set_canvas): New function.

	* vdc/vdc.c (vdc_load_palette): Call
	`video_canvas_palette_set()'.

	* crtc/crtc.c (crtc_load_palette): Changed likewise.

	* machine.c: #include "diskimage.h".

	* core/ciatimer.c (ciat_init_table): Only initialize once.

	* core/ciacore.c (ciacore_init): Initialize CIA table.
	#include "lib.h".

	* c64/c64.c, c128/c128.c, cbm2/cbm2.c, vic20/vic20.c,
	drive/drivetypes.h: Do not initialize CIA table.

	* cia.h, core/ciacore.c: TA and TB are pointer now.

	* drive/drive.c, cbm2/cbm2.c: #include "alarm.h".

	* ciatimer.h: Moved to core directory.

	* core/Makefile.am, Makefile.am: Updated.

	* plus4/ted.c (ted_delay_clk): Do not inline.

	* arch/unix/x11/renderxv.c, interrupt.h, core/viacore.c,
	drive/drivecpu.c: Fixed warnings.

2003-03-27  Tibor Biczo  <crown@axelero.hu>

	* arch/win32/joy.c (joystick_di_open): Return success/failure.
	(set_joystick_device_1, set_joystick_device_2) Update resource
	if DX5 init was succesfull. Call joy_arch_init if it has not
	been initialised yet.
	(joy_arch_init): Only initialise if it was not yet
	initialised.

2003-09-27  Andreas Boose  <viceteam@t-online.de>

	* Version 1.13.1

	* ChangeLog*: Renamed last changelog and reversed order of old
	changelogs.

	* Makefile.am: Added changelog.

	* video/video-viewport.c, video.h (video_viewport_title_set,
	video_viewport_title_free): New function.

	* video/video-canvas.c (video_canvas_shutdown): Free canvas
	title.

	* raster/raster.c (raster_set_title): Call
	`video_viewport_title_set'.

	* c64/cart/c64cart.c (cartridge_resources_shutdown): Free
	`cartfile'.

	* diskimage/rawimage.c, diskimage/rawimage.h
	(rawimage_resources_shutdown): New function.

	* diskimage/diskimage.c, diskimage.h
	(disk_image_resources_shutdown): New function.

	* machine.c (machine_shutdown): Call
	`disk_image_resources_shutdown()'.

	* arch/unix/x11/video.c, arch/win32/video.c,
	arch/msdos/video.c, arch/riscos/video.c, arch/os2/video.c,
	arch/beos/video.cc (video_arch_resources_shutdown): New
	function. (video_arch_init_resources): Renamed.

	* video/video-resources.c, video.h (video_resources_shutdown):
	New function.

	* c64/c64.c, c128/c128.c, vic20/vic20.c, pet/pet.c,
	plus4/plus4.c, cbm2/cbm2.c (machine_resources_shutdown):
	Shutdown video resources.

	* core/viacore.c, via.h (viacore_shutdown): New function.

	* core/ciacore.c, cia.h (viacore_shutdown): New function.

	* core/riotcore.c, riot.h (riotcore_shutdown): New function.

	* drive/iec/iec.c, drive/iec.h (iec_drive_shutdown): New
	function.

	* drive/iecieee/iecieee.c, drive/iecieee.h
	(iecieee_drive_shutdown): New function.

	* drive/ieee/ieee.c, drive/ieee.h (ieee_drive_shutdown): New
	function.

	* drive/tcbm/tcbm.c, drive/tcbm.h (tcbm_drive_shutdown): New
	function.

	* c64/c64drive.c, vic20/vic20drive.c, pet/petdrive.c,
	plus4/plus4drive.c, cbm2/cbm2drive.c, machine-drive.h
	(machine_drive_shutdown): New function.

	* drive/drivecpu.c (drive_cpu_shutdown): Call
	`machine_drive_shutdown()'.

	* resources.c (resources_shutdown): Free machine id.
